{"ast":null,"code":"var _jsxFileName = \"C:\\\\Desenvolvedor\\\\nextjs\\\\next-firebase-test\\\\pages\\\\blog\\\\[pid].tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport Error from \"next/error\";\nconst FirestoreBlogPostsURL = `https://firestore.googleapis.com/v1/projects/${process.env.FIREBASE_PROJECT_ID}/databases/(default)/documents/posts`;\nexport default function Post({\n  user\n}) {\n  const {\n    isFallback\n  } = useRouter();\n\n  if (!isFallback && !post) {\n    return __jsx(Error, {\n      statusCode: 404,\n      title: \"No Blog Post with the provided ID\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 10,\n        columnNumber: 10\n      }\n    });\n  }\n\n  if (isFallback) {\n    return __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 12\n      }\n    }, \"Carregando...\");\n  }\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }\n  }, post.title), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }\n  }, post.blurb), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: post.content\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }\n  }));\n}\nexport const getStaticPaths = async () => {\n  return {\n    paths: [],\n    fallback: true\n  };\n};\nexport const getStaticProps = async context => {\n  const {\n    pid\n  } = context.params;\n\n  try {\n    // Call an external API endpoint to get posts.\n    const res = await fetch(`${FirestoreBlogPostsURL}/${pid}`); // grabs the whole document with the provided document id (in this case pid)\n\n    const post = await res.json();\n    console.log(post); // By returning { props: posts }, the Blog component\n    // will receive `posts` as a prop at build time\n\n    return {\n      props: {\n        post: {\n          pid: params.pid,\n          title: post.fields.title.stringValue,\n          blurb: post.fields.blurb.stringValue,\n          content: post.fields.content.stringValue // html content should be sanitized before using React's dangerouslySetInnerHTML\n\n        },\n        revalidate: 1000\n      }\n    };\n  } catch (error) {\n    console.error(error);\n    return {\n      props: {}\n    };\n  }\n};","map":{"version":3,"sources":["C:/Desenvolvedor/nextjs/next-firebase-test/pages/blog/[pid].tsx"],"names":["useRouter","Error","FirestoreBlogPostsURL","process","env","FIREBASE_PROJECT_ID","Post","user","isFallback","post","title","blurb","__html","content","getStaticPaths","paths","fallback","getStaticProps","context","pid","params","res","fetch","json","console","log","props","fields","stringValue","revalidate","error"],"mappings":";;;AACA,SAASA,SAAT,QAA0B,aAA1B;AACA,OAAOC,KAAP,MAAkB,YAAlB;AAEA,MAAMC,qBAAqB,GAAI,gDAA+CC,OAAO,CAACC,GAAR,CAAYC,mBAAoB,sCAA9G;AAEA,eAAe,SAASC,IAAT,CAAc;AAAEC,EAAAA;AAAF,CAAd,EAAwB;AACrC,QAAM;AAAEC,IAAAA;AAAF,MAAiBR,SAAS,EAAhC;;AACC,MAAI,CAACQ,UAAD,IAAe,CAACC,IAApB,EAA0B;AAC3B,WAAO,MAAC,KAAD;AAAO,MAAA,UAAU,EAAE,GAAnB;AAAwB,MAAA,KAAK,EAAC,mCAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACA;;AACA,MAAID,UAAJ,EAAgB;AACd,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;AACD;;AACD,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKC,IAAI,CAACC,KAAV,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAID,IAAI,CAACE,KAAT,CAFF,EAGE;AAAK,IAAA,uBAAuB,EAAE;AAAEC,MAAAA,MAAM,EAAEH,IAAI,CAACI;AAAf,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF;AAOD;AAED,OAAO,MAAMC,cAA8B,GAAG,YAAY;AACxD,SAAO;AACLC,IAAAA,KAAK,EAAE,EADF;AAELC,IAAAA,QAAQ,EAAE;AAFL,GAAP;AAID,CALM;AAOP,OAAO,MAAMC,cAA8B,GAAG,MAAOC,OAAP,IAAmB;AAC/D,QAAM;AAAEC,IAAAA;AAAF,MAAUD,OAAO,CAACE,MAAxB;;AACA,MAAI;AACJ;AACA,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEpB,qBAAsB,IAAGiB,GAAI,EAAjC,CAAvB,CAFI,CAEwD;;AAC5D,UAAMV,IAAI,GAAG,MAAMY,GAAG,CAACE,IAAJ,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ,EAJI,CAKF;AACF;;AACA,WAAO;AACNiB,MAAAA,KAAK,EAAE;AACNjB,QAAAA,IAAI,EAAE;AACLU,UAAAA,GAAG,EAAEC,MAAM,CAACD,GADP;AAELT,UAAAA,KAAK,EAAED,IAAI,CAACkB,MAAL,CAAYjB,KAAZ,CAAkBkB,WAFpB;AAGLjB,UAAAA,KAAK,EAAEF,IAAI,CAACkB,MAAL,CAAYhB,KAAZ,CAAkBiB,WAHpB;AAILf,UAAAA,OAAO,EAAEJ,IAAI,CAACkB,MAAL,CAAYd,OAAZ,CAAoBe,WAJxB,CAIqC;;AAJrC,SADA;AAOFC,QAAAA,UAAU,EAAE;AAPV;AADD,KAAP;AAWA,GAlBA,CAkBC,OAAOC,KAAP,EAAc;AACfN,IAAAA,OAAO,CAACM,KAAR,CAAcA,KAAd;AACA,WAAO;AAAEJ,MAAAA,KAAK,EAAE;AAAT,KAAP;AACA;AACD,CAxBM","sourcesContent":["import { GetStaticPaths, GetStaticProps } from \"next\";\r\nimport { useRouter } from \"next/router\";\r\nimport Error from \"next/error\";\r\n\r\nconst FirestoreBlogPostsURL = `https://firestore.googleapis.com/v1/projects/${process.env.FIREBASE_PROJECT_ID}/databases/(default)/documents/posts`;\r\n\r\nexport default function Post({ user }) {\r\n  const { isFallback } = useRouter();\r\n  \tif (!isFallback && !post) {\r\n\t\treturn <Error statusCode={404} title=\"No Blog Post with the provided ID\" />;\r\n\t}\r\n  if (isFallback) {\r\n    return <p>Carregando...</p>;\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>{post.title}</h1>\r\n      <p>{post.blurb}</p>\r\n      <div dangerouslySetInnerHTML={{ __html: post.content }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const getStaticPaths: GetStaticPaths = async () => {\r\n  return {\r\n    paths: [],\r\n    fallback: true,\r\n  };\r\n};\r\n\r\nexport const getStaticProps: GetStaticProps = async (context) => {\r\n  const { pid } = context.params\r\n  try {\r\n\t\t// Call an external API endpoint to get posts.\r\n\t\tconst res = await fetch(`${FirestoreBlogPostsURL}/${pid}`); // grabs the whole document with the provided document id (in this case pid)\r\n\t\tconst post = await res.json();\r\n\t\tconsole.log(post)\r\n    // By returning { props: posts }, the Blog component\r\n\t\t// will receive `posts` as a prop at build time\r\n\t\treturn {\r\n\t\t\tprops: {\r\n\t\t\t\tpost: {\r\n\t\t\t\t\tpid: params.pid,\r\n\t\t\t\t\ttitle: post.fields.title.stringValue,\r\n\t\t\t\t\tblurb: post.fields.blurb.stringValue,\r\n\t\t\t\t\tcontent: post.fields.content.stringValue, // html content should be sanitized before using React's dangerouslySetInnerHTML\r\n\t\t\t\t},\r\n        revalidate: 1000,\r\n\t\t\t},\r\n\t\t};\r\n\t} catch (error) {\r\n\t\tconsole.error(error);\r\n\t\treturn { props: {} };\r\n\t}\r\n};\r\n"]},"metadata":{},"sourceType":"module"}